<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="http://craydent.com:4900/socket.io/socket.io.js"></script>
    <script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
    <script src="http://craydent.com/resources/library/craydent-1.8.0.js"></script>
    <script>
        var socket = io('http://craydent.com:4900');
        socket.on('line', function (data) {
            document.getElementById("tail").innerHTML += data;
        });
        socket.on('error', function (data) {
            document.getElementById("tail_error").innerHTML += data;
        });
        socket.on('process_complete', function (data) {
            document.getElementById("out").innerHTML += data.output.replace(/\n/g,'<br />') + '<br /><br />';
        });
        function reload_config() {
            $.ajax({
                url:"http://deploy.craydent.com/RELOAD_CONFIG",
                dataType:"json",
                success:function(data){
                    console.log(data);
                    alert(data.message);
                }
            });
        }
    </script>
    <style>
        .output_window {
            float: left;
            height: 100%;
            width: 300px;
        }
        .apps {
            width: 150px;
            float: left;
        }
    </style>
</head>
<body>
    <div class="apps">
        Apps:
        <div onclick="socket.emit('deploy',{passcode:window.location.search.substring(1),name:this.innerText,action:'build'});">
            catnap
        </div>
        <div onclick="socket.emit('deploy',{passcode:window.location.search.substring(1),name:this.innerText,action:'build'});">
            deploy
        </div>
        <div onclick="socket.emit('deploy',{passcode:window.location.search.substring(1),name:this.innerText,action:'pullsync'});">
            proto
        </div>
        <div onclick="socket.emit('deploy',{passcode:window.location.search.substring(1),name:this.innerText,action:'pullrestart'});">
            proxy
        </div>
        <div onclick="socket.emit('deploy',{passcode:window.location.search.substring(1),name:this.innerText,action:'build'});">
            shapow
        </div>
        <div onclick="reload_config();" style="margin-top: 40px;">
            Reload Proxy Config
        </div>
    </div>
    <div id="tail_error" class="output_window">Errors:<br /></div>
    <div id="out" class="output_window">STD Out:<br /></div>
    <div id="tail" class="output_window">Tail:<br /></div>
</body>
</html>